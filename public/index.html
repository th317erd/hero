<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hero</title>
  <base href="/hero/">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="css/styles.css?v=3">
  <link rel="stylesheet" href="css/buttons.css">
  <link rel="stylesheet" href="css/markdown.css">
  <link rel="stylesheet" href="css/abilities.css">
  <link rel="stylesheet" href="css/modals.css?v=3">

  <!-- Import map for Mythix UI CDN-style imports -->
  <script type="importmap">
  {
    "imports": {
      "@cdn/mythix-ui-core@1": "/mythix-ui/mythix-ui-core/dist/index.js?v=3",
      "@cdn/mythix-ui-modal@1": "/mythix-ui/mythix-ui-modal/dist/mythix-ui-modal.js?v=3"
    }
  }
  </script>
</head>
<body>
  <hero-app id="app">
    <!-- WebSocket handler -->
    <hero-websocket></hero-websocket>

    <!-- Status bar (bottom) -->
    <hero-status-bar id="status-bar"></hero-status-bar>

    <!-- Modal components -->
    <hero-modal-session id="new-session-component" style="display: none;"></hero-modal-session>
    <hero-modal-agent id="new-agent-component" style="display: none;"></hero-modal-agent>
    <hero-modal-ability id="ability-component" style="display: none;"></hero-modal-ability>
    <hero-modal-abilities id="abilities-component" style="display: none;"></hero-modal-abilities>
    <hero-modal-agents id="agents-component" style="display: none;"></hero-modal-agents>
    <hero-modal-agent-config id="agent-config-component" style="display: none;"></hero-modal-agent-config>

    <!-- Login View -->
    <div id="login-view" class="view" data-view="login" style="display: none;">
      <div class="login-container">
        <div class="login-title">
          <img src="assets/images/hero-cape.svg?v=1" alt="Hero" class="logo logo-lg">
          <h1>Hero</h1>
        </div>
        <p class="login-subtitle">AI Agent Chat Interface</p>
        <form id="login-form" autocomplete="off">
          <div class="form-group">
            <label for="username">Username</label>
            <input type="text" id="username" name="username" required autocomplete="off">
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" id="password" name="password" required autocomplete="off">
          </div>
          <div id="login-error" class="error-message"></div>
          <button type="submit" class="button button-primary button-block">Log In</button>
        </form>
      </div>
    </div>

    <!-- Sessions List View -->
    <div id="sessions-view" class="view" data-view="sessions" style="display: none;">
      <hero-header id="sessions-header"></hero-header>
      <main class="sessions-main">
        <hero-sidebar id="sessions-sidebar"></hero-sidebar>
      </main>
    </div>

    <!-- Chat View -->
    <div id="chat-view" class="view" data-view="chat" style="display: none;">
      <hero-header id="chat-header"></hero-header>
      <main class="chat-main">
        <hero-chat id="chat"></hero-chat>
      </main>
      <footer class="chat-footer">
        <hero-input id="chat-input"></hero-input>
      </footer>
    </div>

    <!-- Running Operations Panel -->
    <div id="operations-panel" class="operations-panel" style="display: none;">
      <div class="operations-header">
        <span>Running Operations</span>
        <button type="button" id="toggle-operations" class="button button-icon">&#8722;</button>
      </div>
      <div id="operations-list" class="operations-list"></div>
    </div>
  </hero-app>

  <!-- Component imports (ES modules) -->
  <script type="module">
    // Hero components (includes Mythix-UI dependency)
    import './js/components/index.js?v=4';
  </script>

  <script src="https://cdn.jsdelivr.net/npm/markdown-it@14.1.0/dist/markdown-it.min.js"></script>
  <script src="js/components/hml-prompt.js?v=9"></script>
  <script src="js/markup.js?v=3"></script>
  <script src="js/state.js?v=5"></script>
  <script src="js/utils.js?v=2"></script>
  <script src="js/debug.js?v=2"></script>
  <script src="js/api.js?v=7"></script>
  <script src="js/routing.js?v=3"></script>
  <script src="js/sessions.js?v=2"></script>
  <script src="js/approvals.js?v=1"></script>
  <script src="js/streaming.js?v=1"></script>
  <script src="js/commands.js?v=1"></script>
  <script src="js/app.js?v=10"></script>
</body>
</html>
